using UnityEngine;

public class Spawner : MonoBehaviour
{
    [SerializeField] private Rigidbody _cubePrefab;

    private void OnEnable()
    {
        EventBus.OnSplit += SpawnCube;
    }

    private void OnDisable()
    {
        EventBus.OnSplit -= SpawnCube;
    }

    private Rigidbody SpawnCube(Vector3 position, Vector3 scale, float splitChance)
    {
        Rigidbody cubeInstance = Instantiate(_cubePrefab, position, Quaternion.identity);

        cubeInstance.transform.localScale = scale;

        Splitter splitter = cubeInstance.GetComponent<Splitter>();

        splitter.SetSplitChance(splitChance);

        return cubeInstance;
    }  
}
